'use client';

import { useState, useEffect } from 'react';
import { useTheme } from 'next-themes';
import useSound from 'use-sound';

export default function ThemeSwitcher() {
  const { theme, setTheme } = useTheme();
  const [isMounted, setIsMounted] = useState(false);
  const [toggleThemeSoundPlay] = useSound('/sounds/toggle-theme.mp3');

  // Efetua a montagem para evitar erros de hidratação no Next.js
  useEffect(() => {
    setIsMounted(true);
  }, []);

  // Impede a renderização até que o componente esteja montado
  if (!isMounted) return null;

  const handleThemeSwitch = () => {
    setTheme(theme === 'dark' ? 'light' : 'dark');
    toggleThemeSoundPlay(); // Som será tocado após o clique
  };

  function Sun() {
    return (
      <svg
        width="16"
        height="16"
        viewBox="0 0 16 16"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M8.00001 11.3333C7.34074 11.3333 6.69627 11.1378 6.14811 10.7716C5.59995 10.4053 5.1727 9.88471 4.92041 9.27562C4.66812 8.66653 4.60211 7.99631 4.73073 7.34971C4.85934 6.70311 5.17681 6.10916 5.64299 5.64299C6.10916 5.17681 6.70311 4.85934 7.34971 4.73073C7.99631 4.60211 8.66653 4.66812 9.27562 4.92041C9.88471 5.1727 10.4053 5.59995 10.7716 6.14811C11.1378 6.69627 11.3333 7.34074 11.3333 8.00001C11.3323 8.88374 10.9808 9.73097 10.3559 10.3559C9.73097 10.9808 8.88374 11.3323 8.00001 11.3333Z"
          fill="#F0F0F0"
        />
        <path
          d="M8.00001 4.00001C7.8232 4.00001 7.65363 3.92977 7.52861 3.80475C7.40358 3.67972 7.33334 3.51015 7.33334 3.33334V2.00001C7.33334 1.8232 7.40358 1.65363 7.52861 1.52861C7.65363 1.40358 7.8232 1.33334 8.00001 1.33334C8.17682 1.33334 8.34639 1.40358 8.47141 1.52861C8.59644 1.65363 8.66668 1.8232 8.66668 2.00001V3.33334C8.66668 3.51015 8.59644 3.67972 8.47141 3.80475C8.34639 3.92977 8.17682 4.00001 8.00001 4.00001Z"
          fill="#F0F0F0"
        />
        <path
          d="M8.00001 14.6667C7.8232 14.6667 7.65363 14.5964 7.52861 14.4714C7.40358 14.3464 7.33334 14.1768 7.33334 14V12.6667C7.33334 12.4899 7.40358 12.3203 7.52861 12.1953C7.65363 12.0702 7.8232 12 8.00001 12C8.17682 12 8.34639 12.0702 8.47141 12.1953C8.59644 12.3203 8.66668 12.4899 8.66668 12.6667V14C8.66668 14.1768 8.59644 14.3464 8.47141 14.4714C8.34639 14.5964 8.17682 14.6667 8.00001 14.6667Z"
          fill="#F0F0F0"
        />
        <path
          d="M4.70001 5.36668C4.52321 5.36664 4.35367 5.29638 4.22868 5.17134L3.28601 4.22868C3.16457 4.10294 3.09738 3.93454 3.09889 3.75974C3.10041 3.58494 3.17053 3.41774 3.29413 3.29413C3.41774 3.17053 3.58494 3.10041 3.75974 3.09889C3.93454 3.09738 4.10294 3.16457 4.22868 3.28601L5.17134 4.22868C5.26455 4.32191 5.32802 4.44069 5.35373 4.56999C5.37944 4.69929 5.36624 4.83331 5.3158 4.95511C5.26535 5.07691 5.17992 5.18102 5.07032 5.25428C4.96071 5.32753 4.83184 5.36665 4.70001 5.36668Z"
          fill="#F0F0F0"
        />
        <path
          d="M12.2427 12.9093C12.0659 12.9093 11.8963 12.839 11.7713 12.714L10.8287 11.7713C10.7072 11.6456 10.64 11.4772 10.6416 11.3024C10.6431 11.1276 10.7132 10.9604 10.8368 10.8368C10.9604 10.7132 11.1276 10.6431 11.3024 10.6416C11.4772 10.64 11.6456 10.7072 11.7713 10.8287L12.714 11.7713C12.8072 11.8646 12.8707 11.9834 12.8964 12.1127C12.9221 12.242 12.9089 12.376 12.8585 12.4978C12.808 12.6196 12.7226 12.7237 12.613 12.7969C12.5034 12.8702 12.3745 12.9093 12.2427 12.9093Z"
          fill="#F0F0F0"
        />
        <path
          d="M3.33334 8.66668H2.00001C1.8232 8.66668 1.65363 8.59644 1.52861 8.47141C1.40358 8.34639 1.33334 8.17682 1.33334 8.00001C1.33334 7.8232 1.40358 7.65363 1.52861 7.52861C1.65363 7.40358 1.8232 7.33334 2.00001 7.33334H3.33334C3.51015 7.33334 3.67972 7.40358 3.80475 7.52861C3.92977 7.65363 4.00001 7.8232 4.00001 8.00001C4.00001 8.17682 3.92977 8.34639 3.80475 8.47141C3.67972 8.59644 3.51015 8.66668 3.33334 8.66668Z"
          fill="#F0F0F0"
        />
        <path
          d="M14 8.66668H12.6667C12.4899 8.66668 12.3203 8.59644 12.1953 8.47141C12.0702 8.34639 12 8.17682 12 8.00001C12 7.8232 12.0702 7.65363 12.1953 7.52861C12.3203 7.40358 12.4899 7.33334 12.6667 7.33334H14C14.1768 7.33334 14.3464 7.40358 14.4714 7.52861C14.5964 7.65363 14.6667 7.8232 14.6667 8.00001C14.6667 8.17682 14.5964 8.34639 14.4714 8.47141C14.3464 8.59644 14.1768 8.66668 14 8.66668Z"
          fill="#F0F0F0"
        />
        <path
          d="M3.75734 12.9093C3.62551 12.9093 3.49664 12.8702 3.38704 12.7969C3.27743 12.7237 3.19201 12.6196 3.14156 12.4978C3.09111 12.376 3.07791 12.242 3.10362 12.1127C3.12933 11.9834 3.1928 11.8646 3.28601 11.7713L4.22868 10.8287C4.35441 10.7072 4.52281 10.64 4.69761 10.6416C4.87241 10.6431 5.03962 10.7132 5.16322 10.8368C5.28683 10.9604 5.35694 11.1276 5.35846 11.3024C5.35998 11.4772 5.29278 11.6456 5.17134 11.7713L4.22868 12.714C4.10368 12.839 3.93414 12.9093 3.75734 12.9093Z"
          fill="#F0F0F0"
        />
        <path
          d="M11.3 5.36668C11.1682 5.36665 11.0393 5.32753 10.9297 5.25428C10.8201 5.18102 10.7347 5.07691 10.6842 4.95511C10.6338 4.83331 10.6206 4.69929 10.6463 4.56999C10.672 4.44069 10.7355 4.32191 10.8287 4.22868L11.7713 3.28601C11.8328 3.22234 11.9064 3.17155 11.9877 3.13661C12.0691 3.10167 12.1566 3.08328 12.2451 3.08251C12.3336 3.08174 12.4214 3.09861 12.5033 3.13213C12.5852 3.16565 12.6597 3.21515 12.7223 3.27775C12.7849 3.34034 12.8344 3.41478 12.8679 3.49671C12.9014 3.57864 12.9183 3.66642 12.9175 3.75494C12.9167 3.84346 12.8984 3.93094 12.8634 4.01228C12.8285 4.09362 12.7777 4.16718 12.714 4.22868L11.7713 5.17134C11.6463 5.29638 11.4768 5.36664 11.3 5.36668Z"
          fill="#F0F0F0"
        />
      </svg>
    );
  }

  function Moon() {
    return (
      <svg
        width="16"
        height="16"
        viewBox="0 0 16 16"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M1.35334 8.28C1.59334 11.7133 4.50668 14.5067 7.99334 14.66C10.4533 14.7667 12.6533 13.62 13.9733 11.8133C14.52 11.0733 14.2267 10.58 13.3133 10.7467C12.8667 10.8267 12.4067 10.86 11.9267 10.84C8.66667 10.7067 6.00001 7.98 5.98667 4.76C5.98001 3.89334 6.16001 3.07334 6.48667 2.32667C6.84667 1.5 6.41334 1.10667 5.58001 1.46C2.94001 2.57334 1.13334 5.23334 1.35334 8.28Z"
          fill="#0D0D0D"
        />
      </svg>
    );
  }

  return (
    <button
      aria-label={`Atualmente no tema ${
        theme === 'dark' ? 'escuro' : 'claro'
      }, clique para alternar para o tema ${
        theme === 'dark' ? 'claro' : 'escuro'
      }`}
      onClick={handleThemeSwitch}
      className={`p-2 transition duration-300 ease-in-out rounded-md focus:outline-none ${
        theme === 'light' ? 'hover:bg-neutral-100' : 'hover:bg-dark-50'
      }`}
    >
      {theme === 'light' ? <Moon /> : <Sun />}
    </button>
  );
}
